FIX CRITICAL WISHLIST BUGS: Functionality is broken on Category Pages & Visual State Persistence.

The user reports that the "Heart/Wishlist" button works ONLY on the Homepage. On Category pages (e.g., /category/1), clicking the heart does nothing. Also, the red color state needs to be consistent.

**EXECUTE THESE 3 FIXES:**

1.  **Fix JavaScript Event Binding (`static/js/main.js`):**
    - Currently, you might be using `$('.wishlist-btn').click(...)` which only binds to elements present on initial load.
    - **Change it to Event Delegation:**
      Use `$(document).on('click', '.wishlist-btn', function(e) { ... });`
    - This ensures the click works on ALL pages and dynamically loaded content.
    - **Visual Toggle Logic:** Inside the success callback of the AJAX request:
      - If server returns "added": Add class `text-danger` (make it RED) and switch icon to `fa-solid`.
      - If server returns "removed": Remove class `text-danger` (make it outline) and switch icon to `fa-regular`.

2.  **Fix Backend Category Routes (`app.py`):**
    - Locate the route that renders category products (e.g., `@app.route('/category/<int:category_id>')`).
    - **Critical:** You MUST pass `user=current_user` to the `render_template` function.
    - Without this, the Jinja2 check `{% if product in user.wishlist %}` fails, and all hearts render as empty (outline) by default.

3.  **Fix Category Template (`templates/products.html` or similar):**
    - Ensure the Product Cards in the category page have the EXACT same "Heart Button" HTML code as the homepage.
    - It must include:
      - Class: `wishlist-btn`
      - Attribute: `data-product-id="{{ product.id }}"`
      - Icon Logic: `{% if user.is_authenticated and product in user.wishlist %} fa-solid fa-heart text-danger {% else %} fa-regular fa-heart {% endif %}`

**Action:** Apply these fixes so that clicking the heart on ANY page toggles the state, updates the database, and keeps the heart red if it's in the wishlist.